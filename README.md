# BCMF NAV

> A service that provides daily insights into BCMF by tracking their NAV and AUM

## 관리자

### 1. 설치

1. `git clone` 등을 이용해 리포지토리를 컴퓨터에 받아온다.
2. `npm install -D`로 의존성 패키지를 설치한다.
3. `npm run dev`로 페이지를 빌드한다. (관리자 확인용)

코드만 올려도 GitHub Actions이 자동으로 페이지를 빌드해서 배포하기 때문에 빌드 결과를 직접 commit, push할 필요는 없습니다.

### 2. 포트폴리오 업데이트

> 오후 3시 30분 이후 수정하세요. 장 중에 수정하면 AUM 계산이 꼬일 수 있습니다.

1. `data/pdf.csv` 파일을 연다.
2. 각 열은 순서대로 `종목코드`, `종목명`, `수량(주)`, `평단(원)`를 나타낸다.
3. 새로운 포트폴리오에 맞춰 적당히 수정하고, 마지막 열인 `KRW`의 수량을 `0`으로 바꾼다.
5. `npm run dev`로 페이지를 빌드해서 사이트에 표시된 AUM을 확인한다.
6. 실제 계좌의 AUM에서 사이트에 표시된 AUM을 제한 금액을 `KRW`의 수량으로 넣어준다.
7. `data/pdf.csv` 파일을 commit, push 한다.
8. GitHub Actions가 알아서 업데이트 해줄 때까지 기다린다.

**(중요) 절대 포트폴리오에 적힌 원화예금 금액을 그대로 쓰면 안된다.**

키움증권은 거래수수료를 계좌의 종목별 평가금액에서 제한다.

BCMF NAV에서 계좌의 종목별 평가금액은 단순히 `수량x주가`로 계산되기 때문에 거래수수료를 원화예금에서 빼야 한다.

따라서, 절대 포트폴리오에 적힌 원화예금 금액을 그대로 쓰면 **거래수수료가 포함되지 않은 AUM**이 나오기 때문에 NAV가 실제보다 높게 계산된다.

### 3. 발행주식수 변경

> 오후 3시 30분 이후 수정하세요. 장 중에 수정하면 AUM 계산이 꼬일 수 있습니다.

1. `data/shares.csv` 파일을 연다.
2. 발행주식수를 수정한다.
3. `data/pdf.csv` 파일을 연다.
4. 원화예금 금액을 수정한다.
